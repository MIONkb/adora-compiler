
//===----------------------------------------------------------------------===//
//
// Automatically generated file for CGRA call function in cgrv-opt.
//
//===----------------------------------------------------------------------===//

#include "include/ISA.h"

uint8_t _task_id = 0;

#define LD_DEP_ST_LAST_TASK 1     // this load command depends on the store command of last task
#define LD_DEP_EX_LAST_TASK 2     // this load command depends on the execute command of last task
#define LD_DEP_ST_LAST_SEC_TASK 3 // this load command depends on the store command of last second task
#define EX_DEP_ST_LAST_TASK 1     // this EXECUTE command depends on the store command of last task



//===----------------------------------------------------------------------===//
// Configuration Data 
//===----------------------------------------------------------------------===//
/// kernel_gemm_0
volatile unsigned short cin_kernel_gemm_0[12][3] __attribute__((aligned(8))) = {
		{0x5000, 0xc800, 0x0018},
		{0x0000, 0x0000, 0x0019},
		{0x0000, 0x0000, 0x001a},
		{0x0000, 0x1184, 0x001b},
		{0x0040, 0x0000, 0x001c},
		{0x4000, 0xc800, 0x0020},
		{0x0000, 0x0000, 0x0021},
		{0x0000, 0x0000, 0x0022},
		{0x0000, 0x0004, 0x0023},
		{0x0001, 0x0000, 0x00c8},
		{0x999a, 0x3f99, 0x0168},
		{0x000a, 0x0020, 0x0169},
	};


/// kernel_gemm_1
volatile unsigned short cin_kernel_gemm_1[212][3] __attribute__((aligned(8))) = {
		{0x0000, 0x2800, 0x0008},
		{0x0080, 0x0190, 0x0009},
		{0x0000, 0x0000, 0x000a},
		{0x0000, 0x0484, 0x000b},
		{0x9032, 0x2825, 0x0010},
		{0xd480, 0x019e, 0x0011},
		{0x0000, 0x0000, 0x0012},
		{0x0000, 0x0044, 0x0013},
		{0xa064, 0x2825, 0x0018},
		{0xd480, 0x019e, 0x0019},
		{0x0000, 0x0000, 0x001a},
		{0x0000, 0x0004, 0x001b},
		{0xb07d, 0x2825, 0x0020},
		{0xd480, 0x019e, 0x0021},
		{0x0000, 0x0000, 0x0022},
		{0x0000, 0x01c4, 0x0023},
		{0x0000, 0x2800, 0x0030},
		{0x0080, 0x0190, 0x0031},
		{0x0000, 0x0000, 0x0032},
		{0x0000, 0x1884, 0x0033},
		{0x0000, 0x0000, 0x0034},
		{0x8000, 0x2801, 0x0048},
		{0xf400, 0x019f, 0x0049},
		{0x0000, 0x0000, 0x004a},
		{0x0000, 0x0004, 0x004b},
		{0x9019, 0x2825, 0x0050},
		{0xd480, 0x019e, 0x0051},
		{0x0000, 0x0000, 0x0052},
		{0x0000, 0x0084, 0x0053},
		{0x8003, 0x2801, 0x0080},
		{0xf400, 0x019f, 0x0081},
		{0x0000, 0x0000, 0x0082},
		{0x0000, 0x0004, 0x0083},
		{0x0000, 0x0000, 0x00b8},
		{0x0000, 0x0000, 0x00c0},
		{0x0000, 0x0000, 0x00c8},
		{0x0000, 0x0000, 0x00d0},
		{0x0030, 0x0000, 0x00d8},
		{0x0000, 0x0030, 0x00f0},
		{0x0000, 0x0000, 0x00f8},
		{0x0000, 0x0000, 0x0130},
		{0x0000, 0x3fc0, 0x0190},
		{0x000a, 0x0020, 0x0191},
		{0x0000, 0x6000, 0x0208},
		{0x0000, 0x4000, 0x0210},
		{0x0003, 0x0000, 0x0211},
		{0x0000, 0x4000, 0x0218},
		{0x0003, 0x0000, 0x0219},
		{0x8000, 0x8000, 0x0220},
		{0x0003, 0x0000, 0x0221},
		{0x1000, 0x0404, 0x0228},
		{0x0000, 0x0020, 0x0240},
		{0x0000, 0x0000, 0x0241},
		{0x2000, 0x0000, 0x0280},
		{0xa00c, 0x00a0, 0x02c9},
		{0x002c, 0x0010, 0x02d1},
		{0x0000, 0x2000, 0x02d2},
		{0xc000, 0xc802, 0x02d3},
		{0x0000, 0x0000, 0x02d4},
		{0x500a, 0x0130, 0x02e1},
		{0x0000, 0x3fc0, 0x0328},
		{0x000a, 0x0010, 0x0329},
		{0x0003, 0x0000, 0x0361},
		{0x0003, 0x0000, 0x0369},
		{0x0000, 0x0c00, 0x0370},
		{0x0003, 0x0000, 0x0371},
		{0x0000, 0x0080, 0x0378},
		{0x0000, 0x8000, 0x0380},
		{0x0080, 0x0000, 0x0388},
		{0x0001, 0x0000, 0x0389},
		{0x0003, 0x0000, 0x0391},
		{0x0000, 0x000c, 0x03c8},
		{0x0000, 0x0000, 0x03d0},
		{0xa00c, 0x01b0, 0x0421},
		{0x040a, 0x01a0, 0x0469},
		{0x0003, 0x0000, 0x04b1},
		{0x0003, 0x0000, 0x04b9},
		{0xc000, 0x8000, 0x04c0},
		{0x0080, 0x0000, 0x04c8},
		{0x0004, 0x0000, 0x04c9},
		{0x0000, 0x1180, 0x04d0},
		{0x0000, 0x0180, 0x04d8},
		{0x0003, 0x0000, 0x04d9},
		{0x0000, 0x0180, 0x04e0},
		{0x0003, 0x0000, 0x04e1},
		{0x0000, 0x8180, 0x04e8},
		{0x0000, 0x4180, 0x04f0},
		{0x0000, 0x4180, 0x04f8},
		{0x0000, 0x4180, 0x0500},
		{0x0000, 0x4180, 0x0508},
		{0x0100, 0x0000, 0x0510},
		{0x550a, 0x00b0, 0x0569},
		{0x0000, 0x8000, 0x0600},
		{0x0003, 0x0000, 0x0601},
		{0x0000, 0x6000, 0x0608},
		{0x0002, 0x0000, 0x0609},
		{0x00c0, 0x0434, 0x0610},
		{0x0002, 0x0000, 0x0611},
		{0x0000, 0x01a0, 0x0618},
		{0x0000, 0x1180, 0x0620},
		{0x0000, 0x0200, 0x0628},
		{0x0003, 0x0000, 0x0629},
		{0x0003, 0x0000, 0x0631},
		{0x0000, 0x1000, 0x0638},
		{0xa00c, 0x0120, 0x06b1},
		{0x800c, 0x0130, 0x06b9},
		{0xc000, 0x0000, 0x0750},
		{0xc000, 0x8000, 0x0758},
		{0x0040, 0x680c, 0x0760},
		{0x0000, 0x4180, 0x0768},
		{0x8000, 0x1180, 0x0770},
		{0x0000, 0x6580, 0x0778},
		{0x8000, 0x0080, 0x0780},
		{0x0003, 0x0000, 0x0781},
		{0x0000, 0x1000, 0x0788},
		{0x500a, 0x00c0, 0x07f9},
		{0x900c, 0x00a0, 0x0801},
		{0x520a, 0x00c0, 0x0819},
		{0x600c, 0x00c0, 0x0829},
		{0x0001, 0x1000, 0x08a8},
		{0x0000, 0x0180, 0x08b0},
		{0x0000, 0x0180, 0x08b8},
		{0x0000, 0x1180, 0x08c0},
		{0x0002, 0x0180, 0x08c8},
		{0x0000, 0x0200, 0x08d0},
		{0x0003, 0x0000, 0x08d1},
		{0x0001, 0x1000, 0x08d8},
		{0x0000, 0x0180, 0x08e0},
		{0x0000, 0x0180, 0x08e8},
		{0x0000, 0x0180, 0x08f0},
		{0x0000, 0x0180, 0x08f8},
		{0x0000, 0x0180, 0x0900},
		{0x0000, 0x0180, 0x0908},
		{0x0000, 0x0200, 0x0910},
		{0x0000, 0x1000, 0x09f8},
		{0x0000, 0x1000, 0x0a10},
		{0x0000, 0x0c00, 0x0a18},
		{0x0000, 0x1180, 0x0a20},
		{0x0003, 0x0000, 0x0a21},
		{0x0000, 0x1180, 0x0a28},
		{0x0000, 0x0200, 0x0a30},
		{0x0000, 0x1000, 0x0a60},
		{0x0000, 0x1000, 0x0b48},
		{0x0000, 0x1000, 0x0b60},
		{0x0000, 0x1000, 0x0b70},
		{0x0003, 0x0000, 0x0b71},
		{0x0000, 0x1000, 0x0b78},
		{0x0000, 0x1000, 0x0b80},
		{0x0000, 0x1000, 0x0bb0},
		{0x0000, 0x1000, 0x0c98},
		{0x0000, 0x1000, 0x0cb0},
		{0x0000, 0x7000, 0x0cc0},
		{0x0000, 0x5000, 0x0cc8},
		{0x0000, 0x5000, 0x0cd0},
		{0x0000, 0x4000, 0x0cd8},
		{0x0000, 0x4000, 0x0ce0},
		{0x0000, 0x4000, 0x0ce8},
		{0x0000, 0x4000, 0x0cf0},
		{0x0000, 0x4000, 0x0cf8},
		{0x1000, 0x0000, 0x0d00},
		{0xa00a, 0x0210, 0x0da9},
		{0x0000, 0x0400, 0x0de8},
		{0x0000, 0x1000, 0x0e00},
		{0x0000, 0x1000, 0x0e10},
		{0x0000, 0x1000, 0x0e18},
		{0x0000, 0x1000, 0x0e20},
		{0x0008, 0x0000, 0x0e58},
		{0x0000, 0x0200, 0x0e60},
		{0x0000, 0x3fc0, 0x0e88},
		{0x000a, 0x0030, 0x0e89},
		{0x0000, 0x8000, 0x0f28},
		{0x0080, 0x0000, 0x0f30},
		{0x0000, 0x0400, 0x0f50},
		{0x0000, 0x0000, 0x0f60},
		{0x0000, 0x1000, 0x0f68},
		{0x0000, 0x0000, 0x0f70},
		{0x0000, 0x1000, 0x0fb0},
		{0x0000, 0x3fc0, 0x0ff0},
		{0x000a, 0x0040, 0x0ff1},
		{0x0000, 0x3fc0, 0x1008},
		{0x000a, 0x0040, 0x1009},
		{0x0000, 0x3fc0, 0x1018},
		{0x000a, 0x0200, 0x1019},
		{0x0000, 0x0004, 0x1078},
		{0x0000, 0x0000, 0x10a0},
		{0x0000, 0x0004, 0x10b8},
		{0x0002, 0x0000, 0x10c8},
		{0x0000, 0x0000, 0x1100},
		{0x8005, 0x2801, 0x1118},
		{0xf400, 0x019f, 0x1119},
		{0x0000, 0x0000, 0x111a},
		{0x0000, 0x0004, 0x111b},
		{0x8001, 0x2801, 0x1148},
		{0xf400, 0x019f, 0x1149},
		{0x0000, 0x0000, 0x114a},
		{0x0000, 0x0004, 0x114b},
		{0xa04b, 0x2825, 0x1158},
		{0xd480, 0x019e, 0x1159},
		{0x0000, 0x0000, 0x115a},
		{0x0000, 0x0004, 0x115b},
		{0x8002, 0x2801, 0x1160},
		{0xf400, 0x019f, 0x1161},
		{0x0000, 0x0000, 0x1162},
		{0x0000, 0x0004, 0x1163},
		{0x9004, 0x2801, 0x1168},
		{0xf400, 0x019f, 0x1169},
		{0x0000, 0x0000, 0x116a},
		{0x0000, 0x0004, 0x116b},
		{0x8000, 0x2825, 0x11a8},
		{0xd480, 0x019e, 0x11a9},
		{0x0000, 0x0000, 0x11aa},
		{0x0000, 0x0004, 0x11ab},
	};


void gemm(void* arg_0 ,void* arg_1 ,void* arg_2){
  for (int int_3 = 0; int_3 < 20; int_3 = int_3 + 1){
    {
    /// %0 = ADORA.BlockLoad %arg0 [%arg3, 0] : memref<?x25xf32> -> memref<1x25xf32>  {Id = "0", KernelName = "kernel_gemm_0"}
    uint64_t dramoffset_0 = 100 * int_3;
    uint64_t spadoffset_0 = 0;
    uint64_t roffset_0 = 0;
    load_data(arg_0 + dramoffset_0 + roffset_0, 0x0 + spadoffset_0, 100, 0, _task_id, LD_DEP_ST_LAST_TASK);
    spadoffset_0 = spadoffset_0 + 100;
    
    }
    {
    /// kernel_gemm_0
    load_cfg((void*)cin_kernel_gemm_0, 0xa0000, 72, _task_id, LD_DEP_EX_LAST_TASK);
    config(0x0, 12, _task_id, 0);
    execute(0xc, _task_id, EX_DEP_ST_LAST_TASK);
    }
    {
    /// ADORA.BlockStore %1, %arg0 [%arg3, 0] : memref<1x25xf32> -> memref<?x25xf32>  {Id = "1", KernelName = "kernel_gemm_0"}
    uint64_t dramoffset_1 = 100 * int_3;
    uint64_t spadoffset_1 = 0;
    uint64_t roffset_1 = 0;
    store(arg_0 + dramoffset_1 + roffset_1, 0x4000 + spadoffset_1, 100, _task_id, 0);
    spadoffset_1 = spadoffset_1 + 100;
    
    }
    _task_id++;
    {
    /// %2 = ADORA.BlockLoad %arg0 [%arg3, 0] : memref<?x25xf32> -> memref<1x25xf32>  {Id = "2", KernelName = "kernel_gemm_1"}
    uint64_t dramoffset_2 = 100 * int_3;
    uint64_t spadoffset_2 = 0;
    uint64_t roffset_2 = 0;
    load_data(arg_0 + dramoffset_2 + roffset_2, 0x0 + spadoffset_2, 100, 0, _task_id, LD_DEP_ST_LAST_TASK);
    spadoffset_2 = spadoffset_2 + 100;
    
    }
    {
    /// %3 = ADORA.BlockLoad %arg1 [%arg3, 0] : memref<?x30xf32> -> memref<1x30xf32>  {Id = "3", KernelName = "kernel_gemm_1"}
    uint64_t dramoffset_3 = 120 * int_3;
    uint64_t spadoffset_3 = 0;
    uint64_t roffset_3 = 0;
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x20000 + spadoffset_3, 120, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x60000 + spadoffset_3, 120, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x70000 + spadoffset_3, 120, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x30000 + spadoffset_3, 120, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x74000 + spadoffset_3, 120, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_1 + dramoffset_3 + roffset_3, 0x50000 + spadoffset_3, 120, 0, _task_id, LD_DEP_ST_LAST_TASK);
    spadoffset_3 = spadoffset_3 + 120;
    
    }
    {
    /// %4 = ADORA.BlockLoad %arg2 [0, 0] : memref<?x25xf32> -> memref<30x25xf32>  {Id = "4", KernelName = "kernel_gemm_1"}
    uint64_t dramoffset_4 = 0;
    uint64_t spadoffset_4 = 0;
    uint64_t roffset_4 = 0;
    load_data(arg_2 + dramoffset_4 + roffset_4, 0x90000 + spadoffset_4, 3000, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_2 + dramoffset_4 + roffset_4, 0x24000 + spadoffset_4, 3000, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_2 + dramoffset_4 + roffset_4, 0x4000 + spadoffset_4, 3000, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_2 + dramoffset_4 + roffset_4, 0x78000 + spadoffset_4, 3000, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_2 + dramoffset_4 + roffset_4, 0x8000 + spadoffset_4, 3000, 1, _task_id, LD_DEP_ST_LAST_TASK);
    load_data(arg_2 + dramoffset_4 + roffset_4, 0xc000 + spadoffset_4, 3000, 0, _task_id, LD_DEP_ST_LAST_TASK);
    spadoffset_4 = spadoffset_4 + 3000;
    
    }
    {
    /// kernel_gemm_1
    load_cfg((void*)cin_kernel_gemm_1, 0xa0000, 1272, _task_id, LD_DEP_EX_LAST_TASK);
    config(0x0, 212, _task_id, 0);
    execute(0x7410836f, _task_id, EX_DEP_ST_LAST_TASK);
    }
    {
    /// ADORA.BlockStore %5, %arg0 [%arg3, 0] : memref<1x25xf32> -> memref<?x25xf32>  {Id = "5", KernelName = "kernel_gemm_1"}
    uint64_t dramoffset_5 = 100 * int_3;
    uint64_t spadoffset_5 = 0;
    uint64_t roffset_5 = 0;
    store(arg_0 + dramoffset_5 + roffset_5, 0x10000 + spadoffset_5, 100, _task_id, 0);
    spadoffset_5 = spadoffset_5 + 100;
    
    }
    _task_id++;
  }
  
  
  
}
